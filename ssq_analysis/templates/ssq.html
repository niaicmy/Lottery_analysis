{% extends "index.html" %}
{% load staticfiles %}

{% block main %}
    <div class="container-fluid">
        <div class="row">
            {% block left-body %}
                <div class="col-md-2">
                    <ul class="nav nav-stacked nav-pills">
                        <li><a href={% url "ssq" "red" 1 %}>红球</a></li>
                        <li><a href={% url "ssq" "blue" 1 %}>蓝球</a></li>
                        <li><a class="text-info" href={% url "update" %}>更新数据</a></li>
                    </ul>
                    {% if messages %}
                        {% for message in messages %}
                            <div {% if message.tags %} class="{{ message.tags }}" {% endif %}>
                                <p>{{ message }}</p>
                            </div>
                        {% endfor %}
                    {% endif %}
                    {# <div class="text-danger"><p>{{ message }}</p></div>#}
                </div>
            {% endblock %}

            {% block right-body %}
                <div class="col-md-10">
                    <table class="table table-bordered table-hover table-striped table-condensed">
                        <thead>
                        <tr>
                            <th>期数</th>
                            {% for i in head %}
                                <th>{{ i }}</th>
                            {% endfor %}
                        </tr>
                        </thead>

                        <tbody>
                        {% for i in records %}
                            <tr>
                                {% for foo in i %}
                                    {% if foo >= 10 %}
                                        <td class="danger">{{ foo }}</td>
                                    {% elif foo < 10 and foo >= 5 %}
                                        <td class="warning">{{ foo }}</td>
                                    {% elif foo == 0 %}
                                        <td class="success">{{ foo }}</td>
                                    {% else %}
                                        <td>{{ foo }}</td>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                        {% endfor %}
                        </tbody>

                        <tfoot>
                        <tr>
                            {# 合并行 #}
                            <td colspan="34" class="text-muted">一长串的说明</td>
                        </tr>
                        </tfoot>
                    </table>
                    {#  TODO: 翻页的代码  Ajax #}
                    <div class="col-md-4 col-md-offset-5">
                        <ul class="pagination" id="pagination">
                            {% if num|length > 20 %}
                                <li><a>ssd</a></li>

                                {% comment %}
                                {% ifequal page_info.current_page "1" %}
                                    <li class="active"><a href={% url "ssq" "red" 1 %}>1</a></li>

                                    {% if page_info.page_total|length_is:"1" %}
                                        <li class="disabled"><a href="javascript:void(0);">Next &raquo;</a></li>
                                    {% else %}
                                        {% if page_info.page_total|length > 6 %}
                                            {% for page in page_info.page_total|slice:"1:7" %}
                                                <li><a href={% url "ssq" "red" page %}>{{ page }}</a></li>
                                            {% endfor %}
                                        {% else %}
                                            {% for page in page_info.page_total %}
                                                <li><a href={% url "ssq" "red" page %}>{{ page }}</a></li>
                                            {% endfor %}
                                        {% endif %}

                                        <li><a href={% url "ssq" "red" page|add:"1" %}>Next &raquo;</a></li>
                                    {% endif %}
                                {% endifequal %}

                                {% if page_info.current_page > 1 %}
                                    <li><a href={% url "ssq" "red" page_info.current_page|add:"-1" %}>&laquo; Prev</a>
                                    </li>
                                    {# ================================#}
                                    {% ifequal page_info.current_page "2" %}
                                        <li><a href={% url "ssq" "red" page|add:"-1" %}>{{ page|add:"-1" }}</a></li>
                                        <li class="active"><a href={% url "ssq" "red" page %}>{{ page }}</a></li>
                                        <li><a href={% url "ssq" "red" page|add:"1" %}>{{ page|add:"1" }}</a></li>
                                        <li><a href={% url "ssq" "red" page|add:"2" %}>{{ page|add:"2" }}</a></li>
                                        <li><a href={% url "ssq" "red" page|add:"2" %}>{{ page|add:"3" }}</a></li>
                                        {% else %}
                                        <li><a href={% url "ssq" "red" page|add:"-2" %}>{{ page|add:"-2" }}</a></li>
                                        <li><a href={% url "ssq" "red" page|add:"-1" %}>{{ page|add:"-1" }}</a></li>
                                        <li class="active"><a href={% url "ssq" "red" page %}>{{ page }}</a></li>
                                        <li><a href={% url "ssq" "red" page|add:"1" %}>{{ page|add:"1" }}</a></li>
                                        <li><a href={% url "ssq" "red" page|add:"2" %}>{{ page|add:"2" }}</a></li>
                                    {% endifequal %}

                                    {% for page in page_info.page_total|slice:"page_info.current_page|add:-1:page_info.current_page|add:2" %}
                                    {% endfor %}

                                    {% ifequal page_info.current_page page_info.page_total|length %}
                                        <li class="disabled"><a href="javascript:void(0);">Next &raquo;</a></li>
                                    {% else %}
                                        <li><a href={% url "ssq" "red" page|add:"1" %}>Next &raquo;</a></li>
                                    {% endifequal %}
                                {% endif %}
                            {% endcomment %}
                                {% comment %}
                            {% else %}
                                {% ifequal page_info.current_page "1" %}
                                    <li class="disabled"><a href="javascript:void(0);">&laquo; Prev</a>

                                        {% for page in page_info.show_page %}
                                            {% ifequal page page_info.current_page %}
                                                <li class="active"><a
                                                        href={% url "ssq" "blue" page_info.current_page %}> {{ page_info.current_page }} </a>
                                                </li>
                                            {% else %}
                                                <li><a href={% url "ssq" "blue" page %}> {{ page }} </a></li>
                                            {% endifequal %}
                                        {% endfor %}

                                    <li><a href={% url "ssq" "blue" page|add:"1" %}>Next &raquo;</a></li>
                                {% endifequal %}

                                {% if page_info.current_page > 1 and page_info.current_page < page_info.show_page|slice:"-1" %}
                                    <li><a href={% url "ssq" "blue" page_info.current_page|add:"-1" %}>&laquo; Prev</a>

                                        {% for page in page_info.show_page %}
                                            {% ifequal page page_info.current_page %}
                                                <li class="active"><a
                                                        href={% url "ssq" "blue" page_info.current_page %}> {{ page_info.current_page }} </a>
                                                </li>
                                            {% else %}
                                                <li><a href={% url "ssq" "blue" page %}> {{ page }} </a></li>
                                            {% endifequal %}
                                        {% endfor %}

                                    <li><a href={% url "ssq" "blue" page|add:"1" %}>Next &raquo;</a></li>
                                {% endif %}

                                {% ifequal page_info.current_page page_info.show_page|slice:"-1" %}
                                    <li><a href={% url "ssq" "blue" page_info.current_page|add:"-1" %}>&laquo; Prev</a>

                                        {% for page in page_info.show_page %}
                                            {% ifequal page page_info.current_page %}
                                                <li class="active"><a
                                                        href={% url "ssq" "blue" page_info.current_page %}> {{ page_info.current_page }} </a>
                                                </li>
                                            {% else %}
                                                <li><a href={% url "ssq" "blue" page %}> {{ page }} </a></li>
                                            {% endifequal %}
                                        {% endfor %}
                                    <li class="disabled"><a href="javascript:void(0);">Next &raquo;</a></li>
                                {% endifequal %}
                                {% endcomment %}
                            {% endif %}
                        </ul>
                    </div>
                </div>
            {% endblock %}
        </div>
    </div>
{% endblock %}
{% block script %}
    <script type="text/javascript" src="{% static "js/ssq.js" %}"></script>
{% endblock %}